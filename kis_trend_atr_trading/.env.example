# ==============================================================================
# KIS Trend-ATR Trading System - .env example (complete key set)
# ==============================================================================
# Usage:
#   cp .env.example .env
#   vi .env
#
# WARNING:
# - Never commit .env
# - Keep API keys and passwords secret
# ==============================================================================


# ------------------------------------------------------------------------------
# 1) Runtime mode
# ------------------------------------------------------------------------------
# EXECUTION_MODE: DRY_RUN | PAPER | REAL
EXECUTION_MODE=DRY_RUN

# TRADING_MODE: PAPER | REAL
# Keep aligned with EXECUTION_MODE for clarity.
TRADING_MODE=PAPER

# REAL mode guard
ENABLE_REAL_TRADING=false

# Optional safeguard used by legacy launcher for first live day
REAL_TRADING_DAY1=true


# ------------------------------------------------------------------------------
# 2) Safety
# ------------------------------------------------------------------------------
# Emergency halt switch (read by settings via env key KILL_SWITCH)
KILL_SWITCH=false


# ------------------------------------------------------------------------------
# 3) KIS API
# ------------------------------------------------------------------------------
KIS_APP_KEY=your_app_key_here
KIS_APP_SECRET=your_app_secret_here
KIS_ACCOUNT_NO=12345678
KIS_ACCOUNT_PRODUCT_CODE=01


# ------------------------------------------------------------------------------
# 4) Trading basics
# ------------------------------------------------------------------------------
DEFAULT_STOCK_CODE=005930
ORDER_QUANTITY=1
MAX_POSITIONS=1

INITIAL_CAPITAL=10000000
COMMISSION_RATE=0.00015


# ------------------------------------------------------------------------------
# 5) Runtime session/feed policy
# ------------------------------------------------------------------------------
MARKET_TIMEZONE=Asia/Seoul
DATA_FEED_DEFAULT=rest
RUNTIME_TIMEFRAME=1m

PREOPEN_WARMUP_MIN=10
POSTCLOSE_MIN=10

# Comma-separated HH:MM-HH:MM windows. Empty means disabled.
AUCTION_GUARD_WINDOWS=
ALLOW_EXIT_IN_AUCTION=true
OFFSESSION_WS_ENABLED=false

RUNTIME_STATUS_LOG_INTERVAL_SEC=300
RUNTIME_STATUS_TELEGRAM=false
RUNTIME_INSESSION_SLEEP_SEC=60
RUNTIME_OFFSESSION_SLEEP_SEC=600


# ------------------------------------------------------------------------------
# 6) WS failover / recovery tuning
# ------------------------------------------------------------------------------
WS_START_GRACE_SEC=30
WS_STALE_SEC=60
WS_RECONNECT_MAX_ATTEMPTS=5
WS_RECONNECT_BACKOFF_BASE_SEC=1
WS_RECOVER_POLICY=auto
WS_RECOVER_STABLE_SEC=30
WS_RECOVER_REQUIRED_BARS=2
WS_MIN_DEGRADED_SEC=120
WS_MIN_NORMAL_SEC=120


# ------------------------------------------------------------------------------
# 7) Order sync / pending state maintenance
# ------------------------------------------------------------------------------
PENDING_EXIT_MAX_AGE_HOURS=72
PENDING_ORDER_STALE_MINUTES=240
PENDING_NO_ORDER_STALE_MINUTES=15
INSTANCE_LOCK_STALE_TIMEOUT=3600


# ------------------------------------------------------------------------------
# 8) Token prewarm / refresh
# ------------------------------------------------------------------------------
TOKEN_RETRY_DELAY_SECONDS=61.0
TOKEN_REFRESH_MARGIN_MINUTES=30
TOKEN_PREWARM_HOUR=8
TOKEN_PREWARM_MINUTE=0


# ------------------------------------------------------------------------------
# 9) Telegram
# ------------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
TELEGRAM_ENABLED=true
TELEGRAM_TRANSITION_COOLDOWN_SEC=600


# ------------------------------------------------------------------------------
# 10) Database
# ------------------------------------------------------------------------------
DB_ENABLED=false
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_NAME=kis_trading
DB_USER=root
DB_PASSWORD=your_db_password_here


# ------------------------------------------------------------------------------
# 11) DRY_RUN / report / logging paths
# ------------------------------------------------------------------------------
CBT_STORAGE_TYPE=json
CBT_EQUITY_SAVE_INTERVAL=60

# Legacy optional keys kept for compatibility/docs
CBT_INITIAL_CAPITAL=10000000
CBT_COMMISSION_RATE=0.00015
CBT_AUTO_REPORT_ENABLED=true

TRADE_DATA_TYPE=csv
TRADE_DATA_PATH=data/trades.csv

AUTO_TRADE_LOG_DIR=~/auto-trade/logs
LOG_LEVEL=INFO


# ------------------------------------------------------------------------------
# Quick start examples
# ------------------------------------------------------------------------------
# DRY_RUN:
#   EXECUTION_MODE=DRY_RUN TRADING_MODE=PAPER python -m kis_trend_atr_trading.main_multiday --mode trade
#
# PAPER:
#   EXECUTION_MODE=PAPER TRADING_MODE=PAPER python -m kis_trend_atr_trading.main_multiday --mode trade
#
# REAL (only after validation):
#   EXECUTION_MODE=REAL TRADING_MODE=REAL ENABLE_REAL_TRADING=true python -m kis_trend_atr_trading.main_multiday --mode trade
