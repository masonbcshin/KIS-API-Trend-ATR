# ═══════════════════════════════════════════════════════════════════════════════
# KIS Trend-ATR Trading System - 실계좌(PROD) 설정 파일
# ═══════════════════════════════════════════════════════════════════════════════
#
# ⚠️⚠️⚠️ 경고 ⚠️⚠️⚠️
# 이 파일은 실계좌 환경 설정입니다.
# 실제 돈이 거래됩니다. 극도의 주의가 필요합니다.
#
# ★ 안전장치 요약:
#   1단계: allow_order가 반드시 true여야 합니다. (기본값: false)
#   2단계: 주문 실행 시 콘솔에서 "YES" 입력 확인이 필요합니다.
#
# ★ 실계좌 사용 전 반드시 확인:
#   - 충분한 모의투자 테스트를 완료했는가?
#   - 손실 허용 범위를 설정했는가?
#   - 긴급 정지(Kill Switch) 사용법을 숙지했는가?
#
# ═══════════════════════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────────────────────
# 환경 식별자
# ────────────────────────────────────────────────────────────────
environment: PROD
description: "실계좌 환경 (Real Trading) - 주의 필요!"

# ────────────────────────────────────────────────────────────────
# KIS API 설정
# ────────────────────────────────────────────────────────────────
api:
  # 실계좌 API Base URL
  # ★ 이 URL은 실제 계좌에 연결됩니다.
  base_url: "https://openapi.koreainvestment.com:9443"
  
  # API 호출 타임아웃 (초)
  timeout: 10
  
  # API 호출 실패 시 최대 재시도 횟수
  max_retries: 3
  
  # 재시도 간 대기 시간 (초)
  retry_delay: 1.0
  
  # Rate Limit 대기 시간 (초) - KIS API는 초당 20회 제한
  rate_limit_delay: 0.1

# ────────────────────────────────────────────────────────────────
# 주문 설정
# ────────────────────────────────────────────────────────────────
order:
  # ★★★ 핵심 안전장치 1단계: 주문 허용 여부 ★★★
  # 
  # 기본값: false
  # 
  # ⚠️ 이 값을 true로 변경하면 실계좌 주문이 가능해집니다.
  # ⚠️ 변경 전 반드시 모의투자에서 충분히 테스트하십시오.
  # ⚠️ 변경 시에도 2단계 안전장치(콘솔 확인)가 적용됩니다.
  #
  allow_order: false
  
  # 기본 거래 종목 (삼성전자)
  default_stock_code: "005930"
  
  # 1회 주문 수량
  # ★ 실계좌에서는 보수적으로 설정하십시오.
  default_quantity: 1
  
  # 주문 유형 TR_ID (실계좌)
  tr_id:
    buy: "TTTC0802U"   # 실계좌 매수
    sell: "TTTC0801U"  # 실계좌 매도
    balance: "TTTC8434R"  # 실계좌 잔고조회
    order_status: "TTTC8001R"  # 실계좌 주문조회

# ────────────────────────────────────────────────────────────────
# 전략 파라미터
# ────────────────────────────────────────────────────────────────
strategy:
  # ATR(Average True Range) 계산 기간
  atr_period: 14
  
  # 추세 판단용 이동평균 기간
  trend_ma_period: 50
  
  # 손절 배수 (ATR 기준)
  # 손절가 = 진입가 - (ATR * atr_multiplier_sl)
  atr_multiplier_sl: 2.0
  
  # 익절 배수 (ATR 기준)
  # 익절가 = 진입가 + (ATR * atr_multiplier_tp)
  atr_multiplier_tp: 3.0

# ────────────────────────────────────────────────────────────────
# 리스크 관리
# ────────────────────────────────────────────────────────────────
risk:
  # 최대 손실 비율 (진입가 대비, %)
  # ★ 실계좌에서는 보수적으로 설정하십시오.
  max_loss_pct: 3.0
  
  # ATR 급등 임계값 (평균 대비 배수)
  atr_spike_threshold: 2.0
  
  # ADX 임계값 (추세 강도)
  adx_threshold: 25.0
  
  # ADX 계산 기간
  adx_period: 14
  
  # 일일 최대 손실 허용 비율 (%)
  # ★ 실계좌에서는 더 보수적으로 설정됩니다.
  daily_max_loss_percent: 2.0
  
  # 킬 스위치 (긴급 정지)
  # true로 설정하면 모든 신규 주문이 즉시 차단됩니다.
  enable_kill_switch: false

# ────────────────────────────────────────────────────────────────
# 로깅 설정
# ────────────────────────────────────────────────────────────────
logging:
  level: "INFO"
  log_dir: "logs/prod"

# ────────────────────────────────────────────────────────────────
# 백테스트 설정 (실계좌에서도 백테스트는 가능)
# ────────────────────────────────────────────────────────────────
backtest:
  initial_capital: 10000000
  commission_rate: 0.00015
