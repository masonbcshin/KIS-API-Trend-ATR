# ═══════════════════════════════════════════════════════════════════════════════
# KIS Trend-ATR Trading System - 유니버스(종목) 설정 파일
# ═══════════════════════════════════════════════════════════════════════════════
#
# 자동매매 대상 종목을 관리하는 설정입니다.
#
# ★ 종목 선정 방식:
#   - fixed: 고정 종목 리스트 (아래 stocks 목록 사용)
#   - volume_top: 거래대금 상위 N개 자동 선정 (API 연동 필요)
#   - atr_filter: ATR 기반 변동성 필터 통과 종목
#   - combined: 복합 조건 (거래대금 + ATR 필터)
#
# ★ candidate_pool_mode 의미:
#   - yaml (restricted): candidate_stocks 내부에서만 정렬/필터
#   - market: 시장 후보군(가능하면 API 제공 universe, 없으면 kospi200 대체)에서 스캔
#
# ═══════════════════════════════════════════════════════════════════════════════

universe:
  # ────────────────────────────────────────────────────────────────
  # 종목 선정 방식
  # ────────────────────────────────────────────────────────────────
  selection_method: "combined"
  
  # 최대 동시 거래 종목 수
  max_stocks: 5
  
  # ────────────────────────────────────────────────────────────────
  # 필터 조건 (volume_top, atr_filter, combined 방식 적용)
  # ────────────────────────────────────────────────────────────────
  
  # 최소 일평균 거래대금 (원)
  # 10억 이상 권장 (유동성 확보)
  min_volume: 1000000000
  
  # 최소 시가총액 (억원)
  min_market_cap: 1000
  
  # ATR 비율 범위 (%)
  # ATR / 종가 * 100
  min_atr_pct: 1.0    # 최소 변동성
  max_atr_pct: 8.0    # 최대 변동성 (너무 높으면 위험)
  
  # 관리종목/정리매매 제외
  exclude_management: true
  
  # 거래대금 상위 후보 (volume_top 방식)
  volume_top_n: 50

  # ATR 계산 기간
  atr_period: 14

  # ATR/거래대금 후보 풀 모드
  # - yaml: restricted 모드 (candidate_stocks 또는 stocks 내부에서만 선정)
  # - market: 시장 스캔 모드 (combined를 시장 자동선정처럼 사용하려면 이 값을 사용)
  # - kospi200: KOSPI200 후보 풀
  # - volume_top: volume_top 결과를 ATR 후보로 사용
  candidate_pool_mode: "market"

  # candidate_pool_mode=market에서 조회할 후보군 최대 스캔 수
  market_scan_size: 200

  # candidate_pool_mode=yaml일 때 사용할 후보군
  candidate_stocks:
    - "005930"
    - "000660"
    - "035420"
    - "035720"
    - "051910"

  # 자동선정 실패 시 고정목록 fallback 여부
  fallback_to_fixed: true

  # REAL 모드에서 fallback 발생 시 거래 중단 옵션
  halt_on_fallback_in_real: false

  # Universe 캐시 파일
  universe_cache_file: "data/universe_cache.json"

  # 장중 캐시 리프레시 옵션 (fixed는 영향 없음)
  cache_refresh_enabled: false
  cache_refresh_on_restart: false
  cache_refresh_on_market_open: false
  cache_refresh_interval_minutes: 0
  cache_refresh_methods:
    - "combined"
    - "volume_top"
    - "atr_filter"

  # 예시 1) restricted(현재 기본):
  #   selection_method: "combined"
  #   candidate_pool_mode: "yaml"
  #   candidate_stocks: ["005930","000660",...]
  #
  # 예시 2) market 자동선정:
  #   selection_method: "combined"
  #   candidate_pool_mode: "market"
  #   market_scan_size: 200
  
  # ────────────────────────────────────────────────────────────────
  # 고정 종목 리스트 (selection_method: fixed)
  # ────────────────────────────────────────────────────────────────
  # 
  # 종목코드만 입력합니다.
  # 최대 max_stocks 개수만큼 사용됩니다.
  #
stocks:
    - "005930"   # 삼성전자
    - "000660"   # SK하이닉스
    - "035720"   # 카카오
    - "035420"   # NAVER
    - "051910"   # LG화학

# ────────────────────────────────────────────────────────────────
# 종목별 추가 설정 (선택적)
# ────────────────────────────────────────────────────────────────
stock_overrides:
  # 특정 종목에 대한 개별 설정
  # 예시:
  # "005930":
  #   order_quantity: 10    # 주문 수량 오버라이드
  #   atr_multiplier_sl: 2.5  # 손절 배수 오버라이드

# ────────────────────────────────────────────────────────────────
# 메타정보
# ────────────────────────────────────────────────────────────────
updated_at: "2026-01-29"
description: "기본 유니버스 설정 - 삼성전자 단일 종목"
