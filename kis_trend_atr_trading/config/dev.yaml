# ═══════════════════════════════════════════════════════════════════════════════
# KIS Trend-ATR Trading System - 모의투자(DEV) 설정 파일
# ═══════════════════════════════════════════════════════════════════════════════
#
# 이 파일은 모의투자 환경 전용 설정입니다.
# 실계좌 URL이나 정보를 이 파일에 절대 입력하지 마십시오.
#
# ⚠️ 중요:
#   - 이 설정은 모의투자 환경에서만 사용됩니다.
#   - API 키, 시크릿, 계좌번호는 환경변수에서 로드됩니다.
#
# ═══════════════════════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────────────────────
# 환경 식별자
# ────────────────────────────────────────────────────────────────
environment: DEV
description: "모의투자 환경 (Paper Trading)"

# ────────────────────────────────────────────────────────────────
# KIS API 설정
# ────────────────────────────────────────────────────────────────
api:
  # 모의투자 API Base URL
  # ★ 절대규칙: 이 URL은 모의투자 전용입니다.
  # ★ 실계좌 URL(openapi.koreainvestment.com:9443)을 여기에 입력하지 마십시오.
  base_url: "https://openapivts.koreainvestment.com:29443"
  
  # API 호출 타임아웃 (초)
  timeout: 10
  
  # API 호출 실패 시 최대 재시도 횟수
  max_retries: 3
  
  # 재시도 간 대기 시간 (초)
  retry_delay: 1.0
  
  # Rate Limit 대기 시간 (초) - KIS API는 초당 20회 제한
  rate_limit_delay: 0.1

# ────────────────────────────────────────────────────────────────
# 주문 설정
# ────────────────────────────────────────────────────────────────
order:
  # ★ 핵심 안전장치 1: 주문 허용 여부
  # DEV 환경에서는 기본적으로 주문이 허용됩니다.
  # 모의투자이므로 실제 손실 위험이 없습니다.
  allow_order: true
  
  # 기본 거래 종목 (삼성전자)
  default_stock_code: "005930"
  
  # 1회 주문 수량
  default_quantity: 1
  
  # 주문 유형 TR_ID (모의투자)
  tr_id:
    buy: "VTTC0802U"   # 모의투자 매수
    sell: "VTTC0801U"  # 모의투자 매도
    balance: "VTTC8434R"  # 모의투자 잔고조회
    order_status: "VTTC8001R"  # 모의투자 주문조회

# ────────────────────────────────────────────────────────────────
# 전략 파라미터
# ────────────────────────────────────────────────────────────────
strategy:
  # ATR(Average True Range) 계산 기간
  atr_period: 14
  
  # 추세 판단용 이동평균 기간
  trend_ma_period: 50
  
  # 손절 배수 (ATR 기준)
  # 손절가 = 진입가 - (ATR * atr_multiplier_sl)
  atr_multiplier_sl: 2.0
  
  # 익절 배수 (ATR 기준)
  # 익절가 = 진입가 + (ATR * atr_multiplier_tp)
  atr_multiplier_tp: 3.0

# ────────────────────────────────────────────────────────────────
# 리스크 관리
# ────────────────────────────────────────────────────────────────
risk:
  # 최대 손실 비율 (진입가 대비, %)
  max_loss_pct: 5.0
  
  # ATR 급등 임계값 (평균 대비 배수)
  atr_spike_threshold: 2.5
  
  # ADX 임계값 (추세 강도)
  adx_threshold: 25.0
  
  # ADX 계산 기간
  adx_period: 14
  
  # 일일 최대 손실 허용 비율 (%)
  daily_max_loss_percent: 3.0
  
  # 킬 스위치 (긴급 정지)
  enable_kill_switch: false

# ────────────────────────────────────────────────────────────────
# 로깅 설정
# ────────────────────────────────────────────────────────────────
logging:
  level: "INFO"
  log_dir: "logs/dev"

# ────────────────────────────────────────────────────────────────
# 백테스트 설정
# ────────────────────────────────────────────────────────────────
backtest:
  initial_capital: 10000000
  commission_rate: 0.00015
